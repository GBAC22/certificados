================================================================================
ANÃLISIS DE CONFIGURACIÃ“N BLOCKCHAIN - ESTADO ACTUAL Y PENDIENTES
Sistema de Certificados con Blockchain
Fecha: 8 de diciembre de 2025
================================================================================

ğŸ“‹ RESUMEN EJECUTIVO
================================================================================

ESTADO ACTUAL: âŒ BLOCKCHAIN NO FUNCIONAL
RAZÃ“N PRINCIPAL: Contratos no compilados y no desplegados
VARIABLES CRÃTICAS FALTANTES: CONTRACT_ADDRESS y PRIVATE_KEY


================================================================================
ğŸ” ANÃLISIS DETALLADO DEL ESTADO ACTUAL
================================================================================

1. SMART CONTRACT (âœ… EXISTE PERO NO COMPILADO)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ğŸ“ UbicaciÃ³n: blockchain/contracts/CertificadosFeria.sol

âœ… CORRECTO:
   - Contrato existe y estÃ¡ bien estructurado
   - Usa Solidity 0.8.20
   - Implementa OpenZeppelin Ownable
   - Funciones principales definidas:
     * registrarCertificado(certificadoId, hash, feriaId, proyectoId)
     * verificarCertificado(certificadoId)
     * revocarCertificado(certificadoId)
   - Eventos definidos: CertificadoRegistrado, CertificadoRevocado

âŒ PROBLEMA:
   - NO estÃ¡ compilado (falta carpeta artifacts/)
   - Sin compilar = Sin ABI = Backend no puede interactuar


2. CONFIGURACIÃ“N DE HARDHAT (âœ… CORRECTA)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ğŸ“ UbicaciÃ³n: blockchain/hardhat.config.js

âœ… CORRECTO:
   - ConfiguraciÃ³n de redes bien definida:
     * localhost (chainId 1337) para desarrollo local
     * mumbai (Polygon Testnet - DEPRECADO)
     * amoy (Nuevo testnet de Polygon)
     * polygon (Mainnet)
   - Lee variables de entorno desde backend/.env
   - Paths correctamente configurados

âš ï¸ ADVERTENCIA:
   - Mumbai Testnet estÃ¡ DEPRECADO desde 2024
   - Debe usarse AMOY como testnet actual
   - PRIVATE_KEY no estÃ¡ configurada en .env


3. BACKEND .ENV (âŒ VARIABLES VACÃAS)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ğŸ“ UbicaciÃ³n: backend/.env

ESTADO ACTUAL:
   CONTRACT_ADDRESS=         â† âŒ VACÃO
   PRIVATE_KEY=              â† âŒ VACÃO
   BLOCKCHAIN_NETWORK=mumbai â† âš ï¸ RED DEPRECADA
   BLOCKCHAIN_RPC_URL=https://rpc-mumbai.maticvigil.com

âŒ PROBLEMAS CRÃTICOS:
   1. Sin CONTRACT_ADDRESS â†’ Backend no sabe dÃ³nde estÃ¡ el contrato
   2. Sin PRIVATE_KEY â†’ No se pueden firmar transacciones
   3. Red Mumbai deprecada â†’ Puede no funcionar
   4. Sistema actualmente trabaja en "modo borrador" (sin blockchain)


4. SCRIPTS DE DESPLIEGUE (âœ… EXISTE)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ğŸ“ UbicaciÃ³n: blockchain/scripts/deploy.js

âœ… CORRECTO:
   - Script de despliegue bien estructurado
   - Muestra informaciÃ³n Ãºtil (direcciÃ³n, balance, comandos)
   - Compatible con ethers.js v6

âŒ PROBLEMA:
   - Nunca se ha ejecutado (no hay CONTRACT_ADDRESS)


5. BACKEND BLOCKCHAIN SERVICE (âœ… CÃ“DIGO CORRECTO)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ğŸ“ UbicaciÃ³n: backend/src/services/blockchainService.js

âœ… CORRECTO:
   - Funciones bien implementadas
   - Maneja errores correctamente
   - Fallback a modo borrador si blockchain no estÃ¡ configurado

âŒ PROBLEMA:
   - No puede ejecutarse porque CONTRACT_ADDRESS estÃ¡ vacÃ­o
   - contract = null â†’ Todas las funciones lanzan error


6. DEPENDENCIAS (âœ… INSTALADAS)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Backend:
   âœ… ethers: ^6.9.0 instalado
   âœ… Node.js v22.15.0

Blockchain:
   âœ… hardhat: ^2.19.2 instalado
   âœ… @openzeppelin/contracts: ^5.0.0 instalado
   âœ… @nomicfoundation/hardhat-toolbox: ^4.0.0 instalado


================================================================================
ğŸ“ LISTA DE PENDIENTES PARA ACTIVAR BLOCKCHAIN
================================================================================

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ PRIORIDAD ALTA - REQUERIDO PARA FUNCIONAMIENTO BÃSICO                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

[ ] PASO 1: OBTENER WALLET DE METAMASK
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    Â¿QuÃ© hacer?
    1. Instalar MetaMask (https://metamask.io/)
    2. Crear una wallet nueva
    3. GUARDAR la frase de recuperaciÃ³n de 12 palabras (CRÃTICO)
    4. Copiar la direcciÃ³n pÃºblica (0x...)
    
    Â¿Por quÃ©?
    - Necesitas una wallet para desplegar contratos
    - La wallet firma las transacciones
    - Es tu identidad en la blockchain
    
    âš ï¸ SEGURIDAD:
    - NUNCA compartas tu frase de recuperaciÃ³n
    - NUNCA subas la PRIVATE_KEY a Git
    - Usa .env (ya estÃ¡ en .gitignore)


[ ] PASO 2: OBTENER MATIC DE TESTNET
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    Â¿QuÃ© hacer?
    1. Cambiar MetaMask a red "Polygon Amoy Testnet"
       - Network Name: Polygon Amoy Testnet
       - RPC URL: https://rpc-amoy.polygon.technology
       - Chain ID: 80002
       - Currency: MATIC
       - Block Explorer: https://amoy.polygonscan.com
    
    2. Obtener MATIC gratis desde faucets:
       - https://faucet.polygon.technology/
       - https://www.alchemy.com/faucets/polygon-amoy
       - Necesitas ~0.5 MATIC para desplegar
    
    Â¿Por quÃ©?
    - Desplegar contratos cuesta gas (MATIC)
    - Cada transacciÃ³n blockchain cuesta gas
    - Testnet usa MATIC falso (gratis)


[ ] PASO 3: EXPORTAR PRIVATE KEY
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    Â¿QuÃ© hacer?
    1. En MetaMask: Click en los 3 puntos
    2. Account details â†’ Show private key
    3. Ingresar contraseÃ±a de MetaMask
    4. Copiar la private key (empieza con 0x...)
    5. Pegarla en backend/.env:
       
       PRIVATE_KEY=0xtu_private_key_aqui_sin_espacios
    
    âš ï¸ ADVERTENCIA CRÃTICA:
    - Esta key da acceso total a tus fondos
    - NO la compartas con nadie
    - NO la subas a GitHub
    - backend/.env ya estÃ¡ en .gitignore (verificar)


[ ] PASO 4: COMPILAR EL SMART CONTRACT
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    Â¿QuÃ© hacer?
    Abrir terminal en la carpeta blockchain/ y ejecutar:
    
    cd blockchain
    npm run compile
    
    Â¿QuÃ© hace?
    - Compila CertificadosFeria.sol a bytecode
    - Genera ABI (Application Binary Interface)
    - Crea carpeta artifacts/ con archivos JSON
    
    âœ… Resultado esperado:
    - Carpeta artifacts/ creada
    - Archivo: artifacts/contracts/CertificadosFeria.sol/CertificadosFeria.json
    - Sin errores de compilaciÃ³n
    
    âŒ Errores posibles:
    - "Module not found" â†’ npm install
    - Errores de Solidity â†’ Revisar sintaxis del contrato


[ ] PASO 5: ACTUALIZAR RED A AMOY (Mumbai deprecado)
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    Â¿QuÃ© hacer?
    Editar backend/.env y cambiar:
    
    ANTES:
    BLOCKCHAIN_NETWORK=mumbai
    BLOCKCHAIN_RPC_URL=https://rpc-mumbai.maticvigil.com
    
    DESPUÃ‰S:
    BLOCKCHAIN_NETWORK=amoy
    BLOCKCHAIN_RPC_URL=https://rpc-amoy.polygon.technology
    
    Â¿Por quÃ©?
    - Mumbai fue deprecado en abril 2024
    - Amoy es el nuevo testnet oficial de Polygon
    - Mumbai puede dejar de funcionar en cualquier momento


[ ] PASO 6: DESPLEGAR CONTRATO A TESTNET
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    Â¿QuÃ© hacer?
    En la carpeta blockchain/, ejecutar:
    
    npm run deploy:mumbai
    
    O mejor (para Amoy), ejecutar directamente:
    
    npx hardhat run scripts/deploy.js --network amoy
    
    Â¿QuÃ© hace?
    - Conecta a Polygon Amoy Testnet
    - Despliega el contrato usando tu PRIVATE_KEY
    - Gasta MATIC (gas fee)
    - Devuelve la direcciÃ³n del contrato desplegado
    
    âœ… Resultado esperado:
    VerÃ¡s algo como:
    
    ğŸš€ Desplegando contrato CertificadosFeria...
    ğŸ“ Desplegando con la cuenta: 0xTuDireccion...
    ğŸ’° Balance: 0.5 MATIC
    âœ… CertificadosFeria desplegado en: 0xABC123...
    
    ğŸ“‹ ConfiguraciÃ³n para el backend:
    CONTRACT_ADDRESS=0xABC123...
    
    âš ï¸ IMPORTANTE: Copiar esa direcciÃ³n (0xABC123...)


[ ] PASO 7: CONFIGURAR CONTRACT_ADDRESS EN .ENV
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    Â¿QuÃ© hacer?
    Editar backend/.env y pegar la direcciÃ³n del contrato:
    
    CONTRACT_ADDRESS=0xABC123...
    
    (Reemplazar 0xABC123... con la direcciÃ³n real del paso anterior)
    
    Â¿Por quÃ©?
    - El backend necesita saber dÃ³nde estÃ¡ el contrato
    - Sin esto, no puede leer ni escribir en blockchain
    - Es la "direcciÃ³n IP" del smart contract


[ ] PASO 8: COPIAR ABI AL BACKEND
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    Â¿QuÃ© hacer?
    Copiar el archivo JSON generado en la compilaciÃ³n:
    
    ORIGEN:
    blockchain/artifacts/contracts/CertificadosFeria.sol/CertificadosFeria.json
    
    DESTINO:
    backend/src/config/CertificadosFeria.json
    
    Comando PowerShell:
    Copy-Item "blockchain\artifacts\contracts\CertificadosFeria.sol\CertificadosFeria.json" `
              "backend\src\config\CertificadosFeria.json"
    
    Â¿Por quÃ©?
    - El ABI describe las funciones del contrato
    - Backend usa el ABI para llamar funciones
    - Sin ABI = Backend no puede interactuar con el contrato


[ ] PASO 9: REINICIAR BACKEND
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    Â¿QuÃ© hacer?
    1. Detener el servidor backend (Ctrl+C)
    2. Volver a iniciarlo:
       cd backend
       npm run dev
    
    âœ… Verificar en los logs:
    DeberÃ­as ver:
    
    âœ… Blockchain configurado: Amoy Testnet
    ğŸ“ Contract Address: 0xABC123...
    
    âŒ Si ves:
    âš ï¸ Blockchain no configurado - trabajando en modo borrador
    
    â†’ Revisar que CONTRACT_ADDRESS y PRIVATE_KEY estÃ©n en .env


[ ] PASO 10: PROBAR FUNCIONALIDAD
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    Â¿QuÃ© hacer?
    1. Abrir frontend (http://localhost:5173)
    2. Generar un certificado
    3. Verificar en los logs del backend que se registre en blockchain
    4. Buscar la transacciÃ³n en el explorador:
       https://amoy.polygonscan.com/address/0xTuContractAddress
    
    âœ… Ã‰xito:
    - Certificado generado sin errores
    - Log: "TransacciÃ³n confirmada: 0x..."
    - Certificado visible en PolygonScan
    - PDF tiene QR con link de verificaciÃ³n
    
    âŒ Errores posibles:
    - "Insufficient funds" â†’ Necesitas mÃ¡s MATIC del faucet
    - "Contract not deployed" â†’ CONTRACT_ADDRESS incorrecto
    - "Invalid signature" â†’ PRIVATE_KEY incorrecta
    - "Network mismatch" â†’ BLOCKCHAIN_NETWORK no coincide con hardhat.config.js


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ PRIORIDAD MEDIA - MEJORAS Y OPTIMIZACIÃ“N                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

[ ] PASO 11: VERIFICAR CONTRATO EN POLYGONSCAN
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    Â¿QuÃ© hacer?
    En blockchain/, ejecutar:
    
    npx hardhat verify --network amoy 0xTuContractAddress
    
    Â¿Por quÃ©?
    - Hace el cÃ³digo fuente pÃºblico
    - Permite interactuar con el contrato desde PolygonScan
    - Aumenta transparencia y confianza
    - Los usuarios pueden leer el cÃ³digo del contrato
    
    âš ï¸ Necesitas API Key de PolygonScan (gratis):
    1. Crear cuenta en https://polygonscan.com
    2. API Keys â†’ Create API Key
    3. Agregar a hardhat.config.js:
       
       etherscan: {
         apiKey: process.env.POLYGONSCAN_API_KEY
       }
    
    4. Agregar en backend/.env:
       POLYGONSCAN_API_KEY=tu_api_key_aqui


[ ] PASO 12: IMPLEMENTAR GESTIÃ“N DE GAS
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    Â¿QuÃ© hacer?
    En backend/src/services/blockchainService.js, agregar:
    
    const tx = await contract.registrarCertificado(..., {
      maxFeePerGas: ethers.parseUnits('50', 'gwei'),
      maxPriorityFeePerGas: ethers.parseUnits('30', 'gwei')
    });
    
    Â¿Por quÃ©?
    - Controla el costo de transacciones
    - Evita gas fees excesivos
    - Acelera o ralentiza transacciones segÃºn necesidad


[ ] PASO 13: AGREGAR MANEJO DE ERRORES ROBUSTO
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    Implementar:
    - Reintentos automÃ¡ticos si falla transacciÃ³n
    - Timeout si la red estÃ¡ lenta
    - Logging detallado de errores
    - Notificaciones al usuario si blockchain falla


[ ] PASO 14: CREAR TESTS DEL SMART CONTRACT
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    Â¿QuÃ© hacer?
    En blockchain/test/, crear archivo:
    
    test/CertificadosFeria.test.js
    
    Probar:
    - Registro de certificados
    - VerificaciÃ³n de certificados
    - RevocaciÃ³n de certificados
    - Manejo de errores (duplicados, etc.)
    
    Ejecutar:
    cd blockchain
    npm test


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ PRIORIDAD BAJA - PRODUCCIÃ“N Y ESCALABILIDAD                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

[ ] PASO 15: CONFIGURAR MAINNET (PRODUCCIÃ“N)
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    âš ï¸ SOLO CUANDO ESTÃ‰S LISTO PARA PRODUCCIÃ“N
    
    1. Comprar MATIC real en un exchange
    2. Transferir a tu wallet de MetaMask
    3. Cambiar red a Polygon Mainnet
    4. Desplegar a producciÃ³n:
       npm run deploy:polygon
    5. Actualizar CONTRACT_ADDRESS en .env de producciÃ³n
    
    ğŸ’° COSTO ESTIMADO:
    - Despliegue inicial: ~0.5-1 MATIC ($0.30-$0.60)
    - Cada certificado: ~0.01 MATIC ($0.006)
    - Considerar costos para 1000+ certificados


[ ] PASO 16: IMPLEMENTAR UPGRADEABLE CONTRACTS
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    Usar OpenZeppelin Upgradeable Contracts para:
    - Actualizar lÃ³gica del contrato sin perder datos
    - Corregir bugs post-despliegue
    - Agregar nuevas funcionalidades
    
    PatrÃ³n: UUPS o Transparent Proxy


[ ] PASO 17: MONITOREO Y ALERTAS
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    Implementar:
    - Dashboard de transacciones
    - Alertas si falla registro blockchain
    - Monitoreo de balance de wallet
    - Logs centralizados de eventos blockchain


[ ] PASO 18: OPTIMIZACIÃ“N DE COSTOS
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    Considerar:
    - Registro por lotes (batch) para mÃºltiples certificados
    - Usar IPFS para almacenar PDFs (solo hash en blockchain)
    - Layer 2 mÃ¡s econÃ³micos (zkEVM, Optimism)


================================================================================
ğŸ”§ CONFIGURACIÃ“N .ENV COMPLETA RECOMENDADA
================================================================================

# Server
PORT=3000
NODE_ENV=development

# Database
DB_HOST=localhost
DB_PORT=5432
DB_NAME=semilleros_db
DB_USER=postgres
DB_PASSWORD=Gb22aC08

# Blockchain (TESTNET - Amoy)
BLOCKCHAIN_NETWORK=amoy
BLOCKCHAIN_RPC_URL=https://rpc-amoy.polygon.technology
CONTRACT_ADDRESS=0x... â† COMPLETAR DESPUÃ‰S DEL DESPLIEGUE
PRIVATE_KEY=0x... â† COMPLETAR CON TU METAMASK PRIVATE KEY

# PolygonScan (Opcional - para verificaciÃ³n)
POLYGONSCAN_API_KEY=tu_api_key_aqui

# App
FRONTEND_URL=http://localhost:5173
VERIFY_BASE_URL=http://localhost:3000/api/verificar


================================================================================
ğŸ“š RECURSOS ÃšTILES
================================================================================

DOCUMENTACIÃ“N:
- Hardhat: https://hardhat.org/docs
- Ethers.js: https://docs.ethers.org/v6/
- OpenZeppelin: https://docs.openzeppelin.com/contracts/
- Polygon: https://docs.polygon.technology/

FAUCETS (MATIC GRATIS):
- Polygon Faucet: https://faucet.polygon.technology/
- Alchemy Faucet: https://www.alchemy.com/faucets/polygon-amoy

EXPLORADORES:
- Amoy Testnet: https://amoy.polygonscan.com
- Polygon Mainnet: https://polygonscan.com

TUTORIALES:
- Deploy Hardhat to Polygon: https://docs.polygon.technology/tools/hardhat/
- MetaMask Setup: https://docs.polygon.technology/tools/wallets/metamask/


================================================================================
âš ï¸ ADVERTENCIAS DE SEGURIDAD CRÃTICAS
================================================================================

1. PRIVATE KEY:
   âŒ NUNCA subir a GitHub
   âŒ NUNCA compartir con nadie
   âŒ NUNCA usar la misma wallet para testnet y mainnet con fondos reales
   âœ… Usar wallets separadas para desarrollo y producciÃ³n

2. .ENV:
   âœ… Verificar que estÃ© en .gitignore
   âœ… No enviarlo por email o chat
   âœ… Rotar keys si se exponen

3. SMART CONTRACTS:
   âœ… Auditar cÃ³digo antes de mainnet
   âœ… Probar exhaustivamente en testnet
   âœ… Considerar auditorÃ­a profesional para producciÃ³n

4. FONDOS:
   âœ… Empezar con cantidades pequeÃ±as
   âœ… Monitorear balance de wallet
   âœ… Establecer alertas de saldo bajo


================================================================================
ğŸ¯ RESUMEN DE PASOS INMEDIATOS
================================================================================

PARA EMPEZAR HOY:

1. âœ… Instalar MetaMask
2. âœ… Crear wallet y guardar frase de recuperaciÃ³n
3. âœ… Configurar red Polygon Amoy en MetaMask
4. âœ… Obtener MATIC de faucet (~0.5 MATIC)
5. âœ… Exportar PRIVATE_KEY de MetaMask
6. âœ… Pegar PRIVATE_KEY en backend/.env

LUEGO:

7. cd blockchain && npm run compile
8. Editar backend/.env: cambiar mumbai â†’ amoy
9. npx hardhat run scripts/deploy.js --network amoy
10. Copiar CONTRACT_ADDRESS a backend/.env
11. Copiar ABI a backend/src/config/
12. Reiniciar backend
13. Â¡PROBAR!


================================================================================
â“ PREGUNTAS FRECUENTES
================================================================================

P: Â¿Es necesario blockchain para que funcione el sistema?
R: NO. El sistema funciona en "modo borrador" sin blockchain.
   Blockchain es opcional para inmutabilidad y verificaciÃ³n pÃºblica.

P: Â¿CuÃ¡nto cuesta desplegar en testnet?
R: GRATIS. El MATIC de testnet es falso y se obtiene gratis de faucets.

P: Â¿CuÃ¡nto cuesta desplegar en mainnet (producciÃ³n)?
R: ~$0.30-$0.60 por despliegue + ~$0.006 por certificado registrado.

P: Â¿QuÃ© pasa si se me acaba el MATIC?
R: Las transacciones fallarÃ¡n. El sistema seguirÃ¡ funcionando en modo borrador.
   Simplemente recarga mÃ¡s MATIC del faucet (testnet) o compra (mainnet).

P: Â¿Puedo cambiar el contrato despuÃ©s de desplegarlo?
R: NO, los contratos son inmutables. Debes desplegarlo nuevamente con otra
   direcciÃ³n o usar patrones de upgradeable contracts.

P: Â¿Mumbai sigue funcionando?
R: TÃ©cnicamente sÃ­, pero estÃ¡ deprecado desde abril 2024. Polygon recomienda
   migrar a Amoy. Mumbai podrÃ­a cerrarse en cualquier momento.

P: Â¿CÃ³mo borro la blockchain y empiezo de nuevo?
R: No puedes borrar. Debes desplegar un nuevo contrato con nueva direcciÃ³n
   y actualizar CONTRACT_ADDRESS en .env.


================================================================================
FIN DEL ANÃLISIS
================================================================================

Ãšltima actualizaciÃ³n: 8 de diciembre de 2025
Autor: Sistema de AnÃ¡lisis TÃ©cnico
Estado: Blockchain NO FUNCIONAL - Requiere configuraciÃ³n

Para ayuda adicional, revisar:
- PASOS-ACTIVAR-BLOCKCHAIN.txt (documento previo)
- README.md en carpeta blockchain/
- Logs del backend cuando inicie
